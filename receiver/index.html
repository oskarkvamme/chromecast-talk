<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Google Cast appz</title>
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">



		<script src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/sky.css" id="theme">
		<link rel="stylesheet" href="css/main.css"/>

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-transition="zoom">
					<h1>Google Cast Appz!</h1>
					<br />
					<h3>How to get started with Google Cast development</h3>
					<p>
						<small>Oskar Kvamme / <a href="https://twitter.com/oskarkvamme">@oskarkvamme</a></small>
					</p>
				</section data-transition="zoom">
				<section>
					<h2>This is my dog!</h2>
					<img src="millie.jpg" alt="dog" width="500" />
					<h3>#CRAZYDOGPEOPLE</h3>
				</section>

				<section data-transition="zoom">
					<h2>So, what is Google Cast?</h2>
				</section>

				<section data-transition="zoom">
					<h2>Google Cast is..</h2>
					<img src="http://img.tuttoandroid.net/wp-content/uploads/2014/06/chromecast.jpg" alt="google cast" width="360" style="display: block; margin: 0 auto 20px auto;"/>
					<ul>
						<li>A streaming device/dongle</li>
						<li>Connected to your TV/Display (HDMI)</li>
						<li>WIFI</li>
						<li>Video</li>
						<li>Audio</li>
						<li>Cheap: 299 NOK/ 310 SEK</li>
					</ul>
					<aside class="notes">
						Streaming device, TV/Display, WIFI, Video, Audio, Cheap
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>How can I stream to Google Cast?</h2>
					<ul class="fragment">
						<li>Google Cast enabled web apps</li>
						<li>Google Cast enabled IOS apps</li>
						<li>Google Cast enabled Android apps</li>
					</ul>
					<br />
					<br />
					<div class="fragment">
						<h2>Examples</h2>
						<ul>
							<li>Netflix</li>
							<li>Youtube</li>
							<li>Google Music</li>
						</ul>
					</div>
					<aside class="notes">
						Receiver, Sender, Laptop works as a sender, remote control
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>But wait a minute!</h2>
					<div>
						<br />
						<h3>Google Cast sort of runs Chrome :)</h3>
					</div>
					<aside class="notes">
						Simple version of Chrome OS
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>So...</h2>
					<br />
					<h3>We can do more then streaming!</h3>
					<br />
					<h3>HTML/CSS/Javascript :)</h3>
					<aside class="notes">
						Games (multiplayer), info screens etc.
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>Actually..</h2>
					<br />
					<h3>This presentation, runs on Google Cast!!!!!</h3>
					<br /> 
					<div>
						<div class="split">
							<img src="http://media0.giphy.com/media/HhTXt43pk1I1W/200.gif" alt="explosion" />
						</div>

						<div class="split end">
							<img src="http://media0.giphy.com/media/HhTXt43pk1I1W/200.gif" alt="explosion" />
						</div>
					</div>
					<br />
					<h3>#madscience</h3>
				</section>

				<section data-transition="zoom">
					<h2>Lets get started!</h2>
					<aside class="notes">
						Show how I built this presentation
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>Setup</h2>
					<ul>
						<li>Get a device!</li>
						<li>Run normal setup. Easy peasy lemon squeezy :)</li>
						<li>NB! Remember to enable "Send this Chromecast's serial number to Google..."</li>
						<li>Install chromecast extension for Chrome.</li>
						<li>Register your device on the Google Cast SDK Developer Console(5 EUR)</li>
						<li>Register a new app in the Developer Console</li>
					</ul>
					<aside class="notes">
						Device, Normal setup, enable "Send Chromecast serial number"
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>Reciver Apps</h2>
					<ul>
						<li>Default Receiver</li>
						<li>Styled Media Receiver</li>
						<li>Custom Receiver</li>
						<li>Javascript/HTML/CSS</li>
					</ul>
					<aside class="notes">
						Default Receiver: No registration, no styling. Custom receiver: Url to app. Can be local as long the cast can reach it.
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>Implementation of receiver</h2>
					<br />

					<pre class="fragment"><code><script src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script></code></pre>

					<pre class="fragment">
						<code data-trim>
castReceiverManager = cast.receiver.CastReceiverManager.getInstance();

castReceiverManager.onSenderDisconnected = function(event) {
  if(castReceiverManager.getSenders().length == 0 &&
  event.reason == cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER) {
    window.close();
  }
}
castReceiverManager.start();
						</code>
					</pre>
				</section>

				<section data-transition="zoom">
					<h2>Sender Apps</h2>
					<ul>
						<li>Android Sender (Java)</li>
						<li>IOS Sender (Object-C)</li>
						<li>Chrome Sender (Javascript/HTML/CSS)</li>
					</ul>
					<aside class="notes">
						Chrome sender. Needs google cast extension
					</aside>
				</section>

				<section data-transition="zoom">
					<h2>Implementation of sender (Custom sender)</h2>
					<pre class="fragment"><code><script src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js"></script></code></pre>
					<pre class="fragment">
						<code data-trim>
var initApi = function(){
	var sessionRequest = new chrome.cast.SessionRequest(applicationID);

	var apiConfig = new chrome.cast.ApiConfig(sessionRequest,
		sessionListener, receiverListener)

	chrome.cast.initialize(apiConfig, onInitSuccess, onError);
};
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim>
window['__onGCastApiAvailable'] = function(loaded, errorInfo) {
  if (loaded) {
    initApi();
  } else {
    console.log(errorInfo);
  }
}
						</code>
					</pre>
				</section>

				<section data-transition="zoom">
					<h2>More implementation</h2>
					<pre>
						<code data-trim>
var onInitSuccess = function() {
  var connectButton = $('#connect-button');
  connectButton.removeClass('disabled');
};
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim>
connectButton.on('click', function(e){
  e.preventDefault();
  chrome.cast.requestSession(onRequestSessionSuccess, onLaunchError);
});
						</code>
					</pre>
					<pre class="fragment">
						<code data-trim>
var onRequestSessionSuccess = function(e){
  session = e;

  $('#next, #prev').removeClass('disabled');
};
						</code>
					</pre>
				</section>

				<section data-transition="zoom">
					<h2>Messages</h2>
					<ul>
						<li>Namespace</li>
						<li>urn:x-cast:chromecastappz</li>
					</ul>
				</section>

				<section data-transition="zoom">
					<h2>Messages on sender</h2>
					<pre>
						<code data-trim>
$('#next').on('click', function(e){
  e.preventDefault();
  if(session === null) return;

  var message = {
    type: 'navigation',
    action: 'next'
  };

  session.sendMessage(namespace, message, onMessageSuccess, onMessageError);
});
						</code>
					</pre>
				</section>
				<section data-transition="zoom">
					<h2>Messages on receiver</h2>
					<pre>
						<code data-trim>
messageBus = castReceiverManager.getCastMessageBus(
  namespace,
  cast.receiver.CastMessageBus.MessageType.JSON
);

messageBus.onMessage = function(event) {
  var sender = event.senderId;
  var message = event.data;

  if(message.type === 'navigation'){
    navigate(message.action);
  }
};
						</code>
					</pre>
				</section>
				<section data-transition="zoom">
					<h2>Thats it!</h2>
					<img src="http://media3.giphy.com/media/rxoBSOU6O0SEo/200.gif" alt="happy" />
				</section>

				<section data-transition="zoom">
					<h2>Degugging</h2>
					<br />
					<p>http://CHROMECAST-IP:9222/
				</section>

				<section data-transition="zoom">
					<h2>Media SDK</h2>
					<pre>
						<code data-trim>
var mediaInfo = new chrome.cast.media.MediaInfo(currentMediaURL);
var request = new chrome.cast.media.LoadRequest(mediaInfo);

session.loadMedia(request,
   onMediaDiscovered.bind(this, 'loadMedia'),
   onMediaError);

var onMediaDiscovered function(how, media) {
   currentMedia = media;
   currentMedia.play();
}
						</code>
					</pre>
				</section>

				<section data-transition="zoom">
					<h2>Urls</h2>
					<ul>
						<li>Documentation: <a href="https://developers.google.com/cast/">https://developers.google.com/cast/</a></li>
						<li>Google Cast SDK Developer Console: <a href="https://cast.google.com/publish/#/overview">https://cast.google.com/publish/#/overview</a></li>
					</ul>
				</section>

				<section data-transition="zoom">
					<h2>Thats all Folks!</h2>
					<img src="http://www.netanimations.net/Animated-question-mark-with-flashing-lights-picture.gif" />
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>
		<script src="js/receiver.js"></script>
	</body>
</html>
